import { Autocomplete, Grid, TextField, Typography } from '@mui/material'
import IPv4Input from '../../components/IPv4Input'
import OmniSearch from '../../components/OmniSearch'
import CommandConfigurator from '../../components/CommandConfigurator'
import { fileSearchEnabled, httpFile } from '../../signals/signals'
import Files from '../../assets/dirtree.json'

function Home() {
  return (
    <>
      <h1>Pentester Commands</h1>

      <Grid container spacing={2}>
        <Grid item>
          <IPv4Input />
        </Grid>

        <Grid item>
          <OmniSearch />
        </Grid>
        <Grid item>
          {fileSearchEnabled.value === true && (
            <>
              <Typography>Tools</Typography>

              <Autocomplete
                disablePortal
                id="omni-filesearch-box"
                options={Files as Array<string>}
                sx={{ width: 300 }}
                renderInput={(params) => (
                  <TextField {...params} label="File Search..." />
                )}
                onChange={(
                  event: React.SyntheticEvent,
                  newValue: string | null
                ) => {
                  httpFile.value = newValue === null ? '' : newValue
                }}
              />
            </>
          )}
        </Grid>
      </Grid>

      <CommandConfigurator />
    </>
  )
}

export default Home
