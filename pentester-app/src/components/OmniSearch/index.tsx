import { Autocomplete, Box, Typography } from '@mui/material'
import TextField from '@mui/material/TextField'
import AlertDialog from '../AlertDialog'
import useGlobalStore from '../../hooks/useGlobalStore'

function OmniSearch() {
  const { setSearch } = useGlobalStore()

  interface TermsProps {
    label: string
  }

  const terms: Array<TermsProps> = [
    { label: 'http download' },
    { label: 'download' },
    { label: 'ftp' },
  ]

  return (
    <>
      <Box
        sx={{ display: 'flex', alignContent: 'center', alignItems: 'center' }}
      >
        <AlertDialog title="Search for a command">
          <Typography>
            Fuzzy search is applied, for best results consider a category such
            as 'download' or a protocol like 'http'
          </Typography>
        </AlertDialog>

        <Autocomplete
          disablePortal
          id="omni-search-box"
          options={terms}
          sx={{ width: 300 }}
          renderInput={(params) => (
            <TextField {...params} label="Command Search..." />
          )}
          onChange={(
            event: React.SyntheticEvent,
            newValue: TermsProps | null
          ) => {
            setSearch(newValue?.label !== undefined ? newValue.label : '')
          }}
          isOptionEqualToValue={function (
            option: TermsProps,
            value: TermsProps
          ) {
            if (option.label === value.label) {
              return true
            }

            return false
          }}
        />
      </Box>
    </>
  )
}

export default OmniSearch
